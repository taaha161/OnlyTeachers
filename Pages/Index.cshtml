@page
@using ContactManager.Authorization
@model OT.Pages.Contacts.IndexModel

@{
    ViewData["Title"] = "Index";
}
<div class="modal fade" id="studentPopupModal" tabindex="-1" role="dialog" aria-labelledby="studentPopupModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="studentPopupModalLabel">Student Popup</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>You are a student. Additional information is available in the modal.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<h2>Index</h2>

<p>
    <a asp-page="Create">Create New</a>
</p>


<div class="post-grid">
    @foreach (var item in Model.Post)
    {
        <div class="post-card">
            <div class="post-header">
                <h3>@Html.DisplayFor(modelItem => item.Title)</h3>
                <span class="post-date">@Html.DisplayFor(modelItem => item.PostDate)</span>
            </div>
            <div class="post-content">
                <p>@Html.DisplayFor(modelItem => item.content)</p>
            </div>
            <div class="post-details">
                <span class="post-price">Price: @Html.DisplayFor(modelItem => item.Price)</span>
                <span class="post-subscribers">Subscribers: @Html.DisplayFor(modelItem => item.subscribers)</span>
                <span class="post-status">Status: @Html.DisplayFor(modelItem => item.Status)</span>
            </div>
            <div class="post-actions">
                @if ((await Model.AuthorizationService.AuthorizeAsync(User, item, new[] { ContactOperations.Update })).Succeeded)
                {
                    <a asp-page="./Edit" asp-route-id="@item.Id" class="btn btn-primary">Edit</a>
                }
                   <a asp-page="./Details" asp-route-id="@item.Id" class="btn btn-primary">Details</a>
             


                
                @if ((await Model.AuthorizationService.AuthorizeAsync(User, item, new[] { ContactOperations.Delete })).Succeeded)
                {
                    <a asp-page="./Delete" asp-route-id="@item.Id" class="btn btn-danger">Delete</a>
                }
            </div>
        </div>
    }
</div>

<style>
    .post-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }

    .post-card {
        background-color: #f9f9f9;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        padding: 20px;
    }

    .post-header h3 {
        margin: 0;
        color: #333;
    }

    .post-date {
        color: #777;
    }

    .post-content {
        margin-bottom: 10px;
    }

    .post-details {
        margin-bottom: 10px;
    }

    .post-details span {
        margin-right: 10px;
    }

    .post-actions .btn {
        margin-right: 10px;
    }
</style>

@* @section Scripts {
    <script>
        function showStudentPopup() {
            var userType = '@Model.User.UserType';
            if (userType === 'Student') {
                $('#studentPopupModal').modal('show');
            }
        }
    </script> *@
}
